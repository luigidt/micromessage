web:
  build: .
  volumes:
    - .:/var/www/html
  environment:
    - MICROMESSAGE_ENV=production
    - MICROMESSAGE_DATABASE_NAME=micromessage
    - MICROMESSAGE_DATABASE_USER=postgres
    # Usar um valor gerado aleatoriamente do ambiente. Ex:
    # - POSTGRES_PASSWORD=$DATABASE_PASSWORD
    - MICROMESSAGE_DATABASE_PASSWORD=verysecurepassword
  ports:
    - "8080:80"
  expose:
    - "8080"
  links:
    - postgres
    - redis
postgres:
  image: postgres:9.3
  ports:
    - "5432:5432"
  environment:
    # Usar a mesma vari√°vel que em MICROMESSAGE_DATABASE_PASSWORD
    - POSTGRES_PASSWORD=verysecurepassword
redis:
  image: redis:3.0
  ports:
    - "6379:6379"
